image: gcc

stages:
    - build

build:linux:
    stage: build
    tags:
      - linux
    
    before_script:
    - apt update && apt -y install cmake

    script:
        - mkdir build && cd build/
        - cmake ..
        - cmake --build .
        - ./myproject
        - echo ${pwd}

build:windows:
  stage: build
  tags:
    - windows
  script:
    - cd build
    - '"C:\Program Files\CMake\bin\cmake.exe" -G "Visual Studio 15 2017 Win64" -DBUILD_LIBTIFF=ON ..'
    - '"C:\Program Files\CMake\bin\cmake.exe" ..'
    - '"C:\Program Files\CMake\bin\cmake.exe" --build . --config Release --target ALL_BUILD'
    - cd Release
    - ./myproject
